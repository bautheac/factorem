<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Olivier Bauthéac" />

<meta name="date" content="2019-03-23" />

<title>factor’em!</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">factor’em!</h1>
<h4 class="author"><em>Olivier Bauthéac</em></h4>
<h4 class="date"><em>2019-03-23</em></h4>



<style> body {text-align: justify} </style>
<p>factorem belongs to the <a href="https://bautheac.github.io/finRes/">finRes</a> suite where it facilitates asset pricing research and factor investment backtesting. Install the development version with <code>devtools::install_github(&quot;bautheac/factorem&quot;)</code>.</p>
<p>The package is organised around a workhorse function and a series of wrappers for asset pricing factors popular in the literature. The latter functions get raw financial data retrieved from Bloomberg using the <a href="https://bautheac.github.io/pullit/">pullit</a> package and return S4 objects that carry data belonging to the corresponding factor including positions and return time series.</p>
<div id="factorem" class="section level2">
<h2>factorem</h2>
<p>The factorem function is the workhorse function in <a href="https://bautheac.github.io/factorem/">factorem</a>. From raw financial data and a set of parameter specifications it contruct a complete backtest of the correpsonding asset pricing factor and returns the whole time series for the factor positions and return. For the record the S4 object returned by the function also contains the original raw financial and the set of parameters supplied as well as the original call to the function. The raw financial data should be supplied in a format similar to that of historical datasets returned returned by historical data query functions in pullit:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(pullit); <span class="kw">library</span>(lubridate)

tickers_equity &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ADM US Equity&quot;</span>, <span class="st">&quot;CIVI US Equity&quot;</span>, <span class="st">&quot;GBX US Equity&quot;</span>, <span class="st">&quot;LIND US Equity&quot;</span>, 
                    <span class="st">&quot;SERV US Equity&quot;</span>, <span class="st">&quot;AE US Equity&quot;</span>, <span class="st">&quot;CLGX US Equity&quot;</span>, <span class="st">&quot;GDI US Equity&quot;</span>, 
                    <span class="st">&quot;LZB US Equity&quot;</span>, <span class="st">&quot;SGA US Equity&quot;</span>, <span class="st">&quot;AGCO US Equity&quot;</span>, <span class="st">&quot;CLR US Equity&quot;</span>, 
                    <span class="st">&quot;GHC US Equity&quot;</span>, <span class="st">&quot;MAN US Equity&quot;</span>, <span class="st">&quot;SITE US Equity&quot;</span>, <span class="st">&quot;AJRD US Equity&quot;</span>, 
                    <span class="st">&quot;COMM US Equity&quot;</span>, <span class="st">&quot;GME US Equity&quot;</span>, <span class="st">&quot;MEI US Equity&quot;</span>, <span class="st">&quot;SMP US Equity&quot;</span>)
end &lt;-<span class="st"> </span><span class="kw">Sys.Date</span>(); start &lt;-<span class="st"> </span>end <span class="op">-</span><span class="st"> </span><span class="kw">years</span>(2L)

equity_data_market &lt;-<span class="st"> </span><span class="kw">pull_equity_market</span>(<span class="dt">source =</span> <span class="st">&quot;Bloomberg&quot;</span>, tickers_equity, start, end, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)

<span class="kw">get_data</span>(equity_data_market)</code></pre></div>
<p>From there, constuct a bespoke asset pricing factor using the factorem function. I.e., an equity momentum factor:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(factorem)

ranking_period =<span class="st"> </span>1L
factor &lt;-<span class="st"> </span><span class="kw">factorem</span>(<span class="dt">name =</span> <span class="st">&quot;factorem&quot;</span>, <span class="dt">data =</span> pullit<span class="op">::</span><span class="kw">get_data</span>(equity_data_market),
                   <span class="dt">ranking_period =</span> ranking_period)</code></pre></div>
</div>
<div id="wrappers" class="section level2">
<h2>wrappers</h2>
<p>factorem provides wrapper methods for popular asset pricing factors in the literature. At the time of writing the factors covered in the package include, equity market and momentum as well as futures market, momentum, commercial hedging pressure (CHP), open interest and term structure factors. The author welcomes pull requests that would help expanding the current coverage.</p>
<div id="equity" class="section level3">
<h3>equity</h3>
<div id="market" class="section level4">
<h4>market</h4>
<p>The equity market factor encompasses the entire cross-section of a defined investment opportunity set with, at the time of writing, equal individual position weights. It came into sight in the 1960s for the central role it plays in the Capital Asset Pricing Model <span class="citation">(Treynor 1961a; Treynor 1961b; Sharpe 1964; Sharpe 1964; Mossin 1966; Lintner 1975)</span> and remains the most popular factor to date in the literature when it comes to explaining the cross-section of equity returns:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">equity_market &lt;-<span class="st"> </span><span class="kw">market_factor</span>(<span class="dt">data =</span> equity_data_market)</code></pre></div>
</div>
<div id="momentum" class="section level4">
<h4>momentum</h4>
<p>The equity momentum factor is another popular factor in the asset pricing literature. After being first introduced in <span class="citation">Carhart (1997)</span> it eventually drew the field leaders’ attention in <span class="citation">Fama and French (2012)</span>. The equity momentum sorts on prior returns over a defined ranking period:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ranking_period =<span class="st"> </span>1L
equity_momentum &lt;-<span class="st"> </span><span class="kw">momentum_factor</span>(<span class="dt">data =</span> equity_data_market, <span class="dt">ranking_period =</span> ranking_period)</code></pre></div>
</div>
</div>
<div id="futures" class="section level3">
<h3>futures</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tickers_futures &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;C A Comdty&quot;</span>, <span class="st">&quot;CCA Comdty&quot;</span>, <span class="st">&quot;CLA Comdty&quot;</span>, <span class="st">&quot;CTA Comdty&quot;</span>, <span class="st">&quot;FCA Comdty&quot;</span>, 
                     <span class="st">&quot;GCA Comdty&quot;</span>, <span class="st">&quot;HGA Comdty&quot;</span>, <span class="st">&quot;HOA Comdty&quot;</span>, <span class="st">&quot;KCA Comdty&quot;</span>, <span class="st">&quot;KWA Comdty&quot;</span>, 
                     <span class="st">&quot;LBA Comdty&quot;</span>, <span class="st">&quot;LCA Comdty&quot;</span>, <span class="st">&quot;LHA Comdty&quot;</span>, <span class="st">&quot;NGA Comdty&quot;</span>, <span class="st">&quot;O A Comdty&quot;</span>, 
                     <span class="st">&quot;PAA Comdty&quot;</span>, <span class="st">&quot;S A Comdty&quot;</span>, <span class="st">&quot;SIA Comdty&quot;</span>, <span class="st">&quot;W A Comdty&quot;</span>, <span class="st">&quot;XBA Comdty&quot;</span>)

futures_data_TS &lt;-<span class="st"> </span><span class="kw">pull_futures_market</span>(<span class="dt">source =</span> <span class="st">&quot;storethat&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;term structure&quot;</span>, tickers_futures, 
                                       start, end, <span class="dt">file =</span> storethat, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)

<span class="kw">get_data</span>(futures_data_TS)</code></pre></div>
<div id="market-1" class="section level4">
<h4>market</h4>
<p>factorem provides futures equivalent for the factors above including a futures market factor that, at the time of writing, takes equally weighted positions on the nearby front contract of the commodity futures series provided:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">futures_market &lt;-<span class="st"> </span><span class="kw">market_factor</span>(<span class="dt">data =</span> futures_data_TS)</code></pre></div>
</div>
<div id="momentum-1" class="section level4">
<h4>momentum</h4>
<p>The momentum factor is also popular in the futures asset pricing literature in particular in the context of commodity markets <span class="citation">(Miffre and Rallis 2007)</span>. As does its equity equivalent, it sorts on prior returns:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ranking_period =<span class="st"> </span>1L
futures_momentum &lt;-<span class="st"> </span><span class="kw">momentum_factor</span>(<span class="dt">data =</span> futures_data_TS, <span class="dt">ranking_period =</span> ranking_period)</code></pre></div>
</div>
<div id="commercial-hedging-pressure-chp" class="section level4">
<h4>commercial hedging pressure (CHP)</h4>
<p>The futures commercial hedging pressure factor is based on the well-known hedging pressure-based theory <span class="citation">(Anderson and Danthine 1983; Chang 1985; Cootner 1960; Dusak 1973; Hicks 1939; Hirshleifer 1988; Hirshleifer 1989; Hirshleifer 1990; Kolb 1992; Keynes 1930)</span> which postulates that futures prices for a given commodity are inversely related to the extent that commercial hedgers are short or long and the mimicking portfolio here aims at capturing the impact of hedging pressure as a systemic factor <span class="citation">(Basu and Miffre 2013)</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">futures_data_CFTC &lt;-<span class="st"> </span><span class="kw">pull_futures_CFTC</span>(<span class="dt">source =</span> <span class="st">&quot;Bloomberg&quot;</span>, tickers_futures, start, end, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)

ranking_period =<span class="st"> </span>1L
futures_CHP &lt;-<span class="st"> </span><span class="kw">CHP_factor</span>(<span class="dt">price_data =</span> futures_data_TS, <span class="dt">CHP_data =</span> futures_data_CFTC, 
                          <span class="dt">ranking_period =</span> ranking_period)</code></pre></div>
</div>
<div id="open-interest" class="section level4">
<h4>open interest</h4>
<p>The open interest factor relates to futures market liquidity and is popular in the literature, in particular in the context of commodity markets research <span class="citation">(Hong and Yogo 2012)</span>. It comes in two flavours in factorem, nearby and aggregate.</p>
<div id="nearby" class="section level5">
<h5>nearby</h5>
<p>The nearby open interest factor is concerned with liquidity at the very front end of the term structure where it sorts on nearby front contract’s open interest:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ranking_period =<span class="st"> </span>1L
futures_OI_nearby &lt;-<span class="st"> </span><span class="kw">OI_nearby_factor</span>(<span class="dt">data =</span> futures_data_TS, <span class="dt">ranking_period =</span> ranking_period)</code></pre></div>
</div>
<div id="aggregate" class="section level5">
<h5>aggregate</h5>
<p>In contrast, the aggregate open interest factor <span class="citation">(Basu and Bauthéac 2018)</span> is concerned with liquidity over the whole futures term strucutre and sorts on open interest aggregated (summed up) over the futures term structure:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">futures_data_agg &lt;-<span class="st"> </span><span class="kw">pull_futures_market</span>(<span class="dt">source =</span> <span class="st">&quot;Bloomberg&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;aggregate&quot;</span>, tickers_futures, 
                                        start, end, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)

ranking_period =<span class="st"> </span>1L
futures_OI_aggregate &lt;-<span class="st"> </span><span class="kw">OI_aggregate_factor</span>(<span class="dt">price_data =</span> futures_data_market, 
                                            <span class="dt">aggregate_data =</span> futures_data_agg, 
                                            <span class="dt">ranking_period =</span> ranking_period)</code></pre></div>
</div>
</div>
<div id="term-structure" class="section level4">
<h4>term structure</h4>
<p>The futures term structure factor <span class="citation">(Szymanowska et al. 2014; Fuertes, Miffre, and Fernandez-Perez 2015)</span> is concerned with the shape (steepness) of the futures term structure and sorts on roll yield:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ranking_period =<span class="st"> </span>1L
futures_TS &lt;-<span class="st"> </span><span class="kw">TS_factor</span>(<span class="dt">data =</span> futures_data_market, <span class="dt">ranking_period =</span> ranking_period)</code></pre></div>
</div>
</div>
</div>
<div id="accessors" class="section level2">
<h2>accessors</h2>
<p>Accessor methods allow access to the content of the factor output: ### name</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">get_name</span>(factor)</code></pre></div>
<div id="positions" class="section level3">
<h3>positions</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">get_positions</span>(factor)</code></pre></div>
</div>
<div id="returns" class="section level3">
<h3>returns</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">get_returns</span>(factor)</code></pre></div>
</div>
<div id="data-initially-supplied" class="section level3">
<h3>data initially supplied</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">get_data</span>(factor)</code></pre></div>
</div>
<div id="parameters" class="section level3">
<h3>parameters</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">get_parameters</span>(factor)</code></pre></div>
</div>
<div id="function-call" class="section level3">
<h3>function call</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">get_call</span>(factor)</code></pre></div>
</div>
</div>
<div id="summary" class="section level2">
<h2>summary</h2>
<p>A summary method returns a performance summary of the corresponding facotr: ### function call</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(factor)</code></pre></div>
</div>
<div id="plotit" class="section level2">
<h2>plotit</h2>
<p>The <a href="https://bautheac.github.io/plotit/">plotit</a> package, also part of the finRes suite, provides plot methods for the factor objects returned by the functions above:</p>
<div id="performance-overview" class="section level3">
<h3>performance overview</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(plotit)

<span class="kw">plot</span>(factor, <span class="dt">type =</span> <span class="st">&quot;performance&quot;</span>)</code></pre></div>
</div>
<div id="positions-overview" class="section level3">
<h3>positions overview</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(factor, <span class="dt">type =</span> <span class="st">&quot;positions&quot;</span>)</code></pre></div>
</div>
</div>
<div id="references" class="section level2 unnumbered">
<h2>References</h2>
<div id="refs" class="references">
<div id="ref-anderson_hedger_1983">
<p>Anderson, Ronald W., and Jean-Pierre Danthine. 1983. “Hedger Diversity in Futures Markets.” <em>The Economic Journal</em> 93 (370): 370–89. doi:<a href="https://doi.org/10.2307/2232798">10.2307/2232798</a>.</p>
</div>
<div id="ref-basu_financiallization_2018">
<p>Basu, Devraj, and Olivier Bauthéac. 2018. “Financialization of Commodities: An Asset Pricing Perspective.” <em>Working Paper</em>.</p>
</div>
<div id="ref-basu_capturing_2013">
<p>Basu, Devraj, and Joëlle Miffre. 2013. “Capturing the Risk Premium of Commodity Futures: The Role of Hedging Pressure.” <em>Journal of Banking &amp; Finance</em> 37 (7): 2652–64. doi:<a href="https://doi.org/10.1016/j.jbankfin.2013.02.031">10.1016/j.jbankfin.2013.02.031</a>.</p>
</div>
<div id="ref-carhart1997persistence">
<p>Carhart, Mark M. 1997. “On Persistence in Mutual Fund Performance.” <em>The Journal of Finance</em> 52 (1). Wiley Online Library: 57–82. doi:<a href="https://doi.org/10.1111/j.1540-6261.1997.tb03808.x">10.1111/j.1540-6261.1997.tb03808.x</a>.</p>
</div>
<div id="ref-chang_returns_1985">
<p>Chang, Eric C. 1985. “Returns to Speculators and the Theory of Normal Backwardation.” <em>The Journal of Finance</em> 40 (1): 193–208. doi:<a href="https://doi.org/10.1111/j.1540-6261.1985.tb04944.x">10.1111/j.1540-6261.1985.tb04944.x</a>.</p>
</div>
<div id="ref-cootner_returns_1960">
<p>Cootner, Paul H. 1960. “Returns to Speculators: Telser Versus Keynes.” <em>Journal of Political Economy</em> 68 (4): 396–404. doi:<a href="https://doi.org/10.1086/258347">10.1086/258347</a>.</p>
</div>
<div id="ref-dusak_futures_1973">
<p>Dusak, Katherine. 1973. “Futures Trading and Investor Returns: An Investigation of Commodity Market Risk Premiums.” <em>Journal of Political Economy</em> 81 (6): 1387–1406. doi:<a href="https://doi.org/10.1086/260133">10.1086/260133</a>.</p>
</div>
<div id="ref-fama2012size">
<p>Fama, Eugene F., and Kenneth R. French. 2012. “Size, Value, and Momentum in International Stock Returns.” <em>Journal of Financial Economics</em> 105 (3). Elsevier: 457–72. doi:<a href="https://doi.org/10.1016/j.jfineco.2012.05.011">10.1016/j.jfineco.2012.05.011</a>.</p>
</div>
<div id="ref-fuertes_commodity_2015">
<p>Fuertes, Ana-Maria, Joëlle Miffre, and Adrian Fernandez-Perez. 2015. “Commodity Strategies Based on Momentum, Term Structure, and Idiosyncratic Volatility.” <em>Journal of Futures Markets</em> 35 (3): 274–97. doi:<a href="https://doi.org/10.1002/fut.21656">10.1002/fut.21656</a>.</p>
</div>
<div id="ref-hicks_value_1939">
<p>Hicks, John Richard. 1939. <em>Value and Capital</em>. Oxford University Press, Cambridge.</p>
</div>
<div id="ref-hirshleifer_risk_1988">
<p>Hirshleifer, David. 1988. “Risk, Futures Pricing, and the Organization of Production in Commodity Markets.” <em>Journal of Political Economy</em> 96 (6): 1206–20. doi:<a href="https://doi.org/10.1086/261584">10.1086/261584</a>.</p>
</div>
<div id="ref-hirshleifer_determinants_1989">
<p>———. 1989. “Determinants of Hedging and Risk Premia in Commodity Futures Markets.” <em>Journal of Financial and Quantitative Analysis</em> 24 (3): 313–31. doi:<a href="https://doi.org/10.2307/2330814">10.2307/2330814</a>.</p>
</div>
<div id="ref-hirshleifer_hedging_1990">
<p>———. 1990. “Hedging Pressure and Futures Price Movements in a General Equilibrium Model.” <em>Econometrica</em> 58 (2): 411–28. doi:<a href="https://doi.org/10.2307/2938209">10.2307/2938209</a>.</p>
</div>
<div id="ref-hong_what_2012">
<p>Hong, Harrison, and Motohiro Yogo. 2012. “What Does Futures Market Interest Tell Us About the Macroeconomy and Asset Prices?” <em>Journal of Financial Economics</em> 105 (3): 473–90. doi:<a href="https://doi.org/10.1016/j.jfineco.2012.04.005">10.1016/j.jfineco.2012.04.005</a>.</p>
</div>
<div id="ref-keynes_treatise_1930">
<p>Keynes, John Maynard. 1930. <em>Treatise on Money</em>. Macmillan, London.</p>
</div>
<div id="ref-kolb_is_1992">
<p>Kolb, Robert W. 1992. “Is Normal Backwardation Normal?” <em>Journal of Futures Markets</em> 12 (1): 75–91.</p>
</div>
<div id="ref-lintner1975valuation">
<p>Lintner, John. 1975. “The Valuation of Risk Assets and the Selection of Risky Investments in Stock Portfolios and Capital Budgets.” In <em>Stochastic Optimization Models in Finance</em>, 131–55. Elsevier. doi:<a href="https://doi.org/10.1016/B978-0-12-780850-5.50018-6">10.1016/B978-0-12-780850-5.50018-6</a>.</p>
</div>
<div id="ref-miffre2007momentum">
<p>Miffre, Joëlle, and Georgios Rallis. 2007. “Momentum Strategies in Commodity Futures Markets.” <em>Journal of Banking &amp; Finance</em> 31 (6). Elsevier: 1863–86. doi:<a href="https://doi.org/10.1016/j.jbankfin.2006.12.005">10.1016/j.jbankfin.2006.12.005</a>.</p>
</div>
<div id="ref-mossin1966equilibrium">
<p>Mossin, Jan. 1966. “Equilibrium in a Capital Asset Market.” <em>Econometrica: Journal of the Econometric Society</em>. JSTOR, 768–83. doi:<a href="https://doi.org/10.2307/1910098">10.2307/1910098</a>.</p>
</div>
<div id="ref-sharpe1964capital">
<p>Sharpe, William F. 1964. “Capital Asset Prices: A Theory of Market Equilibrium Under Conditions of Risk.” <em>The Journal of Finance</em> 19 (3). Wiley Online Library: 425–42. doi:<a href="https://doi.org/10.1111/j.1540-6261.1964.tb02865.x">10.1111/j.1540-6261.1964.tb02865.x</a>.</p>
</div>
<div id="ref-szymanowska_anatomy_2014">
<p>Szymanowska, Marta, Frans De Roon, Theo Nijman, and Rob Van Den Goorbergh. 2014. “An Anatomy of Commodity Futures Risk Premia.” <em>The Journal of Finance</em> 69 (1): 453–82. doi:<a href="https://doi.org/10.1111/jofi.12096">10.1111/jofi.12096</a>.</p>
</div>
<div id="ref-treynor1961market">
<p>Treynor, Jack L. 1961a. “Market Value, Time, and Risk.” <em>Time, and Risk (August 8, 1961)</em>. doi:<a href="https://doi.org/10.2139/ssrn.2600356">10.2139/ssrn.2600356</a>.</p>
</div>
<div id="ref-treynor1961toward">
<p>———. 1961b. <em>Toward a Theory of Market Value of Risky Assets</em>. Unknown.</p>
</div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
